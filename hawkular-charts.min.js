angular.module("hawkular.charts",[]);var Charts;!function(t){"use strict";function n(t,n,a){var e=d3.svg.line().interpolate("monotone").x(function(n){return t(n.timestamp)}).y(function(t){return n(a)});return e}function a(t,a,e,r,i,o){var s=t.selectAll("path.alertLine").data([r]);s.attr("class",o).attr("d",n(a,e,i)),s.enter().append("path").attr("class",o).attr("d",n(a,e,i)),s.exit().remove()}function e(t,n){function a(t,n){var a,e=[];return t.forEach(function(r,i){0===i&&r.avg>n?e.push(i):(a=t[i-1],r.avg>n&&a&&(!a.avg||a.avg<=n)&&e.push(a.avg?i-1:i))}),e}function e(n,a){var e,r,o,s=[];return n.forEach(function(n){o=t[n];for(var c=n;c<t.length-1;c++)if(e=t[c],r=t[c+1],e.avg>a&&r.avg<=a||e.avg>a&&!r.avg){s.push(new i(o.timestamp,r.avg?r.timestamp:e.timestamp,a));break}}),s.length===n.length-1&&s.push(new i(t[n[n.length-1]].timestamp,t[t.length-1].timestamp,a)),s}var r,o;return o=a(t,n),r=e(o,n)}function r(t,n,a,e,r){function i(t){t.attr("class","alertBounds").attr("x",function(t){return n(t.startTimestamp)}).attr("y",function(){return a(e)}).attr("height",function(t){return 185}).attr("width",function(t){return n(t.endTimestamp)-n(t.startTimestamp)})}var o=t.select("g.alertHolder").selectAll("rect.alertBounds").data(r);o.call(i),o.enter().append("rect").call(i),o.exit().remove()}var i=function(){function t(t,n,a){this.startTimestamp=t,this.endTimestamp=n,this.alertValue=a,this.startDate=new Date(t),this.endDate=new Date(n)}return t}();t.AlertBound=i,t.createAlertLine=a,t.extractAlertRanges=e,t.createAlertBoundsArea=r}(Charts||(Charts={}));var Charts;!function(t){"use strict";var n=angular.module("hawkular.charts"),a=function(){function t(t){this.value=t}return t.prototype.toString=function(){return this.value},t.UP="up",t.DOWN="down",t.UNKNOWN="unknown",t}();t.AvailStatus=a;var e=function(){function t(t,n,a,e,r,i,o){this.start=t,this.end=n,this.value=a,this.startDate=e,this.endDate=r,this.duration=i,this.message=o,this.duration=moment(n).from(moment(t),!0),this.startDate=new Date(t),this.endDate=new Date(n)}return t}();t.TransformedAvailDataPoint=e;var r=function(){function n(r){var i=this;this.restrict="E",this.replace=!0,this.scope={data:"=",startTimestamp:"@",endTimestamp:"@",timeLabel:"@",dateLabel:"@",noDataLabel:"@",chartTitle:"@"},this.link=function(o,s,c){function u(t){return"<div class='chartHover'>\n            <div class=\"info-item\">\n              <span class='chartHoverLabel'>Status:</span>\n              <span class='chartHoverValue'>"+t.value.toUpperCase()+"</span>\n            </div>\n            <div class=\"info-item before-separator\">\n              <span class='chartHoverLabel'>Duration:</span>\n              <span class='chartHoverValue'>"+t.duration+"</span>\n            </div>\n          </div>"}function l(){b&&S.selectAll("*").remove(),S=d3.select(s[0]),b=S.append("svg").attr("viewBox","0 0 760 150").attr("preserveAspectRatio","xMinYMin meet"),T=d3.tip().attr("class","d3-tip").offset([-10,0]).html(function(t){return u(t)}),E=b.append("g").attr("width",N+R.left+R.right).attr("height",B).attr("transform","translate("+R.left+","+F+")"),E.append("defs").append("pattern").attr("id","diagonal-stripes").attr("patternUnits","userSpaceOnUse").attr("patternTransform","scale(0.7)").attr("width",4).attr("height",4).append("path").attr("d","M-1,1 l2,-2 M0,4 l4,-4 M3,5 l2,-2").attr("stroke","#B6B6B6").attr("stroke-width",1.2),E.call(T)}function m(n){var a=[];H=+c.startTimestamp||d3.min(n,function(t){return t.start})||+moment().subtract(1,"hour"),n&&n.length>0&&(a[0]=H,a[1]=M||+moment(),y=d3.scale.linear().clamp(!0).rangeRound([70,0]).domain([0,175]),C=d3.svg.axis().scale(y).ticks(0).tickSize(0,0).orient("left"),A=d3.time.scale().range([0,N]).domain(a),D=d3.svg.axis().scale(A).tickSize(-70,0).orient("top").tickFormat(t.xAxisTimeFormats()))}function d(t){return t.value===a.UP.toString()}function f(t){return t.value===a.UNKNOWN.toString()}function p(t){function n(t,n){return t.timestamp<n.timestamp?-1:t.timestamp>n.timestamp?1:0}var r=[],i=t.length;if(t.sort(n),t&&i>0&&t[0].timestamp){var o=(new Date).getTime();if(1===i){var s=t[0];r.push(new e(o-36e5,s.timestamp,a.UNKNOWN.toString())),r.push(new e(s.timestamp,o,s.value))}else for(var c=o,u=t.length;u>0;u--){if(H>=t[u-1].timestamp){r.push(new e(H,c,t[u-1].value));break}r.push(new e(t[u-1].timestamp,c,t[u-1].value)),c=t[u-1].timestamp}}return r}function h(){E.append("text").attr("class","availUpLabel").attr("x",-10).attr("y",25).style("font-family","Arial, Verdana, sans-serif;").style("font-size","12px").attr("fill","#999").style("text-anchor","end").text("Up"),E.append("text").attr("class","availDownLabel").attr("x",-10).attr("y",55).style("font-family","Arial, Verdana, sans-serif;").style("font-size","12px").attr("fill","#999").style("text-anchor","end").text("Down")}function v(t){function n(t){return V-o(0)+(d(t)||f(t)?0:35)}function a(t){return o(0)-(f(t)?15:50)}function e(t){return d(t)?"#54A24E":f(t)?"url(#diagonal-stripes)":"#D85054"}var r=(d3.min(t,function(t){return+t.start}),d3.max(t,function(t){return+t.end})),i=d3.time.scale().range([0,N]).domain([H,M||r]),o=d3.scale.linear().clamp(!0).range([V,0]).domain([0,4]);d3.svg.axis().scale(i).ticks(8).tickSize(13,0).orient("top");E.selectAll("rect.availBars").data(t).enter().append("rect").attr("class","availBars").attr("x",function(t){return i(+t.start)}).attr("y",function(t){return n(t)}).attr("height",function(t){return a(t)}).attr("width",function(t){var n=M?Math.min(+t.end,M):+t.end;return i(n)-i(+t.start)}).attr("fill",function(t){return e(t)}).attr("opacity",function(){return.85}).on("mouseover",function(t,n){T.show(t,n)}).on("mouseout",function(){T.hide()}).on("mousedown",function(){var t=E.select(".brush").node(),n=new Event("mousedown");n.pageX=d3.event.pageX,n.clientX=d3.event.clientX,n.pageY=d3.event.pageY,n.clientY=d3.event.clientY,t.dispatchEvent(n)}).on("mouseup",function(){var t=E.select(".brush").node(),n=new Event("mouseup");n.pageX=d3.event.pageX,n.clientX=d3.event.clientX,n.pageY=d3.event.pageY,n.clientY=d3.event.clientY,t.dispatchEvent(n)}),E.append("line").attr("x1",0).attr("y1",70).attr("x2",655).attr("y2",70).attr("stroke-width",.5).attr("stroke","#D0D0D0"),h()}function g(){E.selectAll("g.axis").remove(),w=E.append("g").attr("class","x axis").call(D),E.append("g").attr("class","y axis").call(C)}function x(){function n(){E.classed("selecting",!0)}function a(){var n=P.extent(),a=Math.round(n[0].getTime()),e=Math.round(n[1].getTime()),i=e-a;i>=6e4&&(console.log("Drag: AvailTimeRangeChanged:"+n),r.$broadcast(t.EventNames.AVAIL_CHART_TIMERANGE_CHANGED.toString(),n)),k.call(P.clear())}P=d3.svg.brush().x(A).on("brushstart",n).on("brushend",a),k=E.append("g").attr("class","brush").call(P),k.selectAll(".resize").append("path"),k.selectAll("rect").attr("height",70)}var y,A,C,D,w,P,k,T,b,S,E,H=+c.startTimestamp,M=+c.endTimestamp,L=n._CHART_HEIGHT,R=(c.noDataLabel||"No Data",{top:10,right:5,bottom:5,left:90}),N=n._CHART_WIDTH-R.left-R.right,_=L-50,V=_-R.top-R.bottom,I=30,$=10,B=V+R.top-I-$,F=+I+$+R.top;o.$watchCollection("data",function(t){console.log("Avail Chart Data Changed"),t&&(i.transformedDataPoints=p(angular.fromJson(t)),o.render(i.transformedDataPoints))}),o.$watchGroup(["startTimestamp","endTimestamp"],function(t){console.log("Avail Chart Start/End Timestamp Changed"),H=+t[0]||H,M=+t[1]||M,o.render(i.transformedDataPoints)}),o.render=function(t){console.log("Starting Avail Chart Directive Render"),t&&t.length>0&&(console.group("Render Avail Chart"),console.time("availChartRender"),l(),m(t),g(),x(),v(t),console.timeEnd("availChartRender"),console.groupEnd())}}}return n.Factory=function(){var t=function(t){return new n(t)};return t.$inject=["$rootScope"],t},n._CHART_HEIGHT=150,n._CHART_WIDTH=750,n}();t.AvailabilityChartDirective=r,n.directive("availabilityChart",r.Factory())}(Charts||(Charts={}));var Charts;!function(t){"use strict";var n=angular.module("hawkular.charts"),a=function(){function n(a){var e=this;this.restrict="E",this.replace=!0,this.scope={data:"=",showYAxisValues:"="},this.link=function(r,i,o){function s(){A&&C.selectAll("*").remove(),C=d3.select(i[0]),A=C.append("svg").attr("width",k+w.left+w.right).attr("height",b).attr("viewBox","0 0 760 50").attr("preserveAspectRatio","xMinYMin meet"),D=A.append("g").attr("transform","translate("+w.left+", 0)").attr("class","contextChart")}function c(a){console.log("dataPoints.length: "+a.length),h=d3.time.scale().range([0,k-10]).nice().domain([a[0].timestamp,a[a.length-1].timestamp]),v=d3.svg.axis().scale(h).ticks(5).tickSize(4,0).tickFormat(t.xAxisTimeFormats()).orient("bottom"),D.selectAll("g.axis").remove(),g=D.append("g").attr("class","x axis").attr("transform","translate(0,"+T+")").call(v);var e=d3.min(a,function(t){return t.avg}),r=d3.max(a,function(t){return t.avg});r+=.03*r,e-=.05*e,d=d3.scale.linear().rangeRound([n._CHART_HEIGHT-10,0]).nice().domain([e,r]);var i=m?2:0;f=d3.svg.axis().scale(d).ticks(i).tickSize(4,0).orient("left"),p=D.append("g").attr("class","y axis").call(f);var o=d3.svg.area().interpolate("cardinal").defined(function(t){return!t.empty}).x(function(t){return h(t.timestamp)}).y0(function(t){return T}).y1(function(t){return d(t.avg)}),s=d3.svg.line().interpolate("cardinal").defined(function(t){return!t.empty}).x(function(t){return h(t.timestamp)}).y(function(t){return d(t.avg)}),c=D.selectAll("path.contextLine").data([a]);c.attr("class","contextLine").transition().attr("d",s),c.enter().append("path").attr("class","contextLine").transition().attr("d",s),c.exit().remove();var u=D.append("g").attr("class","context");u.append("path").datum(a).transition().duration(500).attr("class","contextArea").attr("d",o)}function u(){function n(){D.classed("selecting",!0)}function e(){var n=x.extent(),e=Math.round(n[0].getTime()),r=Math.round(n[1].getTime()),i=r-e;i>=6e4&&(console.log("Drag: ContextChartTimeRangeChanged:"+n),a.$broadcast(t.EventNames.CONTEXT_CHART_TIMERANGE_CHANGED.toString(),n))}x=d3.svg.brush().x(h).on("brushstart",n).on("brushend",e),g.append("g").selectAll("rect").attr("y",0).attr("height",T-10),y=D.append("g").attr("class","brush").call(x),y.selectAll(".resize").append("path"),y.selectAll("rect").attr("height",T+17)}function l(t){return t?t.map(function(t){var n=t.timestamp||t.start+(t.end-t.start)/2;return{timestamp:n,value:angular.isNumber(t.value)?t.value:void 0,avg:t.empty?void 0:t.avg,min:angular.isNumber(t.min)?t.min:void 0,max:angular.isNumber(t.max)?t.max:void 0,empty:t.empty}}):void 0}var m,d,f,p,h,v,g,x,y,A,C,D,w={top:0,right:5,bottom:5,left:90},P=n._CHART_HEIGHT,k=n._CHART_WIDTH-w.left-w.right,T=P-w.top-w.bottom,b=T+w.top;"undefined"!=typeof o.showYAxisValues&&(m="true"===o.showYAxisValues),r.$watchCollection("data",function(t){console.log("Context Chart Data Changed"),t&&(e.dataPoints=l(angular.fromJson(t)),r.render(e.dataPoints))}),r.render=function(t){t&&t.length>0&&(console.group("Render Context Chart"),console.time("contextChartRender"),s(),c(t),u(),console.timeEnd("contextChartRender"),console.groupEnd())}}}return n.Factory=function(){var t=function(t){return new n(t)};return t.$inject=["$rootScope"],t},n._CHART_WIDTH=750,n._CHART_HEIGHT=50,n}();t.ContextChartDirective=a,n.directive("hawkularContextChart",a.Factory())}(Charts||(Charts={}));var Charts;!function(t){"use strict";var n=function(){function t(t){this.value=t}return t.prototype.toString=function(){return this.value},t.CHART_TIMERANGE_CHANGED=new t("ChartTimeRangeChanged"),t.AVAIL_CHART_TIMERANGE_CHANGED=new t("AvailChartTimeRangeChanged"),t.CONTEXT_CHART_TIMERANGE_CHANGED=new t("ContextChartTimeRangeChanged"),t}();t.EventNames=n}(Charts||(Charts={}));var Charts;!function(t){"use strict";function n(t,n,a,e,r){var i=1,o=t.selectAll(".dataPointDot").data(r);o.attr("class","dataPointDot").attr("r",i).attr("cx",function(t){return n(t.timestamp)}).attr("cy",function(t){return t.avg?a(t.avg):-9999999}).on("mouseover",function(t,n){e.show(t,n)}).on("mouseout",function(){e.hide()}),o.enter().append("circle").attr("class","dataPointDot").attr("r",i).attr("cx",function(t){return n(t.timestamp)}).attr("cy",function(t){return t.avg?a(t.avg):-9999999}).on("mouseover",function(t,n){e.show(t,n)}).on("mouseout",function(){e.hide()}),o.exit().remove()}t.createDataPoints=n}(Charts||(Charts={}));var Charts;!function(t){"use strict";var n=!1,a=10,e=25;angular.module("hawkular.charts").directive("hawkularChart",["$rootScope","$http","$interval","$log",function(r,i,o,s){function c(c,u,l){function m(){return mt}function d(){return m()<=Ut}function f(){nt&&at.selectAll("*").remove(),at=d3.select(u[0]),nt=at.append("svg").attr("viewBox","0 0 760 "+(lt+e)).attr("preserveAspectRatio","xMinYMin meet"),t.createSvgDefs(nt),et=nt.append("g").attr("width",Bt+$t.left+$t.right).attr("height",Xt).attr("transform","translate("+$t.left+","+Ot+")"),Z=d3.tip().attr("class","d3-tip").offset([-10,0]).html(function(t,n){return A(t,n)}),et.call(Z),et.append("g").attr("class","alertHolder"),Jt=!0}function p(n){n&&(ot=d3.max(n.map(function(n){return t.isEmptyDataPoint(n)?0:n.avg||n.value})),st=d3.min(n.map(function(n){return t.isEmptyDataPoint(n)?void 0:n.avg||n.value}))),rt=It?0:.95*st,it=ot+.2*(ot-st),At&&(it=Math.max(it,1.2*At),rt=Math.min(rt,.95*At)),it=it||rt?it:a}function h(n){var a,e=20;if(n.length>0){d()?(Bt=250,a=3,z=n.slice(n.length-e,n.length)):(a=9,z=n),p(n),X=function(){return Bt/z.length-Wt},O=function(t){return 0===t||t===z.length-1?X()/2:X()},W=function(t,n){return j(t.timestamp)-(0===n?0:X()/2)},J=d3.scale.linear().clamp(!0).rangeRound([Gt,0]).domain([rt,it]),K=d3.svg.axis().scale(J).ticks(5).tickSize(4,4,0).orient("left");var r,i=d3.min(n.map(function(t){return t.timestamp}));r=Y&&Y.length>0?Y[Y.length-1].timestamp:d3.max(n.map(function(t){return t.timestamp})),j=d3.time.scale().range([0,Bt]).domain([i,r]),q=d3.svg.axis().scale(j).ticks(a).tickFormat(t.xAxisTimeFormats()).tickSize(4,4,0).orient("bottom")}}function v(n){function e(){var a,e,r,i,o=[],s=[];return n.forEach(function(n){a=d3.max(n.values.map(function(n){return t.isEmptyDataPoint(n)?0:n.avg})),o.push(a),e=d3.min(n.values.map(function(n){return t.isEmptyDataPoint(n)?Number.MAX_VALUE:n.avg})),s.push(e)}),r=d3.max(o),i=d3.min(s),[i,r]}var r,i,o=e();return ot=o[1],st=o[0],rt=It?0:st-.05*st,At?(r=1.2*At,i=ot+.2*(ot-st),it=r>i?r:i):it=ot+.2*(ot-st),[rt,it||rt?it:a]}function g(n){var a=9;if(n&&n[0]&&n[0].values){var e=v(n);rt=e[0],it=e[1],J=d3.scale.linear().clamp(!0).rangeRound([Gt,0]).domain([rt,it]),K=d3.svg.axis().scale(J).ticks(5).tickSize(4,4,0).orient("left"),j=d3.time.scale().range([0,Bt]).domain([d3.min(n,function(t){return d3.min(t.values,function(t){return t.timestamp})}),d3.max(n,function(t){return d3.max(t.values,function(t){return t.timestamp})})]),q=d3.svg.axis().scale(j).ticks(a).tickFormat(t.xAxisTimeFormats()).tickSize(4,4,0).orient("bottom")}}function x(t,n,a,e,r){void 0===r&&(r=60);var o={headers:{"Hawkular-Tenant":vt},params:{start:a,end:e,buckets:r}};if(a>=e&&s.log("Start date was after end date"),t&&gt&&n){var u=gt.split("-");i.get(t+"/"+u[0]+"s/"+n+"/"+(u[1]||"data"),o).success(function(t){ct=y(t),c.render(ct,ut)}).error(function(t,n){s.error("Error Loading Chart Data:"+n+", "+t)})}}function y(t){return t?t.map(function(t){var n=t.timestamp||t.start+(t.end-t.start)/2;return{timestamp:n,date:new Date(n),value:angular.isNumber(t.value)?t.value:void 0,avg:t.empty?void 0:t.avg,min:angular.isNumber(t.min)?t.min:void 0,max:angular.isNumber(t.max)?t.max:void 0,empty:t.empty}}):void 0}function A(n,a){var e,r,i,o=n.timestamp,s=moment(n.timestamp).format(dt);return a>0&&(r=z[a-1].timestamp,i=moment(o).from(moment(r),!0)),e=t.isEmptyDataPoint(n)?"<div class='chartHover'>\n                <small class='chartHoverLabel'>"+St+"</small>\n                <div><small><span class='chartHoverLabel'>"+Et+"</span><span>: </span><span class='chartHoverValue'>"+i+"</span></small> </div>\n                <hr/>\n                <div><small><span class='chartHoverLabel'>"+Rt+"</span><span>: </span><span class='chartHoverValue'>"+s+"</span></small></div>\n                </div>":t.isRawMetric(n)?"<div class='chartHover'>\n                <div><small><span class='chartHoverLabel'>"+Rt+"</span><span>: </span><span class='chartHoverValue'>"+s+"</span></small></div>\n                  <div><small><span class='chartHoverLabel'>"+Et+"</span><span>: </span><span class='chartHoverValue'>"+i+"</span></small></div>\n                  <hr/>\n                  <div><small><span class='chartHoverLabel'>"+bt+"</span><span>: </span><span class='chartHoverValue'>"+d3.round(n.value,2)+"</span></small> </div>\n                  </div> ":"<div class='chartHover'>\n                    <div class=\"info-item\">\n                      <span class='chartHoverLabel'>"+Rt+":</span>\n                      <span class='chartHoverValue'>"+s+"</span>\n                    </div>\n                    <div class=\"info-item before-separator\">\n                      <span class='chartHoverLabel'>"+Et+":</span>\n                      <span class='chartHoverValue'>"+i+"</span>\n                    </div>\n                    <div class=\"info-item separator\">\n                      <span class='chartHoverLabel'>"+Mt+":</span>\n                      <span class='chartHoverValue'>"+d3.round(n.max,2)+"</span>\n                    </div>\n                    <div class=\"info-item\">\n                      <span class='chartHoverLabel'>"+Lt+":</span>\n                      <span class='chartHoverValue'>"+d3.round(n.avg,2)+"</span>\n                    </div>\n                    <div class=\"info-item\">\n                      <span class='chartHoverLabel'>"+Ht+":</span>\n                      <span class='chartHoverValue'>"+d3.round(n.min,2)+"</span>\n                    </div>\n                  </div> "}function C(n){function a(a){a.attr("class",e).on("mouseover",function(t,n){Z.show(t,n)}).on("mouseout",function(){Z.hide()}).transition().attr("x",function(t,n){return W(t,n)}).attr("width",function(t,n){return O(n)}).attr("y",function(n){return t.isEmptyDataPoint(n)?0:J(n.avg)}).attr("height",function(n){return Gt-J(t.isEmptyDataPoint(n)?J(it):n.avg)}).attr("opacity",n?".6":"1").attr("fill",function(a,e){return t.isEmptyDataPoint(a)?"url(#noDataStripes)":n?"#D3D3D6":"#C0C0C0"}).attr("stroke",function(t){return"#777"}).attr("stroke-width",function(t){return"0"}).attr("data-hawkular-value",function(t){return t.avg})}var e=n?"leaderBar":"histogram",r=et.selectAll("rect."+e).data(z);r.call(a),r.enter().append("rect").call(a),r.exit().remove(),Vt?et.selectAll(".histogramTopStem, .histogramBottomStem, .histogramTopCross, .histogramBottomCross").remove():S(n)}function D(n){n.attr("class",function(t){return t.min===t.max?"singleValue":"high"}).attr("x",function(t,n){return W(t,n)}).attr("y",function(t){return J(isNaN(t.max)?rt:t.max)}).attr("height",function(n){return t.isEmptyDataPoint(n)?0:J(n.avg)-J(n.max)||2}).attr("width",function(t,n){return O(n)}).attr("opacity",.9).on("mouseover",function(t,n){Z.show(t,n)}).on("mouseout",function(){Z.hide()})}function w(n){n.attr("class","low").attr("x",function(t,n){return W(t,n)}).attr("y",function(t){return isNaN(t.avg)?Gt:J(t.avg)}).attr("height",function(n){return t.isEmptyDataPoint(n)?0:J(n.min)-J(n.avg)}).attr("width",function(t,n){return O(n)}).attr("opacity",.9).on("mouseover",function(t,n){Z.show(t,n)}).on("mouseout",function(){Z.hide()})}function P(n){n.attr("class","histogramTopStem").filter(function(n){return!t.isEmptyDataPoint(n)}).attr("x1",function(n){return t.xMidPointStartPosition(n,j)}).attr("x2",function(n){return t.xMidPointStartPosition(n,j)}).attr("y1",function(t){return J(t.max)}).attr("y2",function(t){return J(t.avg)}).attr("stroke",function(t){return"red"}).attr("stroke-opacity",function(t){return Kt})}function k(n){n.filter(function(n){return!t.isEmptyDataPoint(n)}).attr("class","histogramBottomStem").attr("x1",function(n){return t.xMidPointStartPosition(n,j)}).attr("x2",function(n){return t.xMidPointStartPosition(n,j)}).attr("y1",function(t){return J(t.avg)}).attr("y2",function(t){return J(t.min)}).attr("stroke",function(t){return"red"}).attr("stroke-opacity",function(t){return Kt})}function T(n){n.filter(function(n){return!t.isEmptyDataPoint(n)}).attr("class","histogramTopCross").attr("x1",function(n){return t.xMidPointStartPosition(n,j)-3}).attr("x2",function(n){return t.xMidPointStartPosition(n,j)+3}).attr("y1",function(t){return J(t.max)}).attr("y2",function(t){return J(t.max)}).attr("stroke",function(t){return"red"}).attr("stroke-width",function(t){return"0.5"}).attr("stroke-opacity",function(t){return Kt})}function b(n){n.filter(function(n){return!t.isEmptyDataPoint(n)}).attr("class","histogramBottomCross").attr("x1",function(n){return t.xMidPointStartPosition(n,j)-3}).attr("x2",function(n){return t.xMidPointStartPosition(n,j)+3}).attr("y1",function(t){return J(t.min)}).attr("y2",function(t){return J(t.min)}).attr("stroke",function(t){return"red"}).attr("stroke-width",function(t){return"0.5"}).attr("stroke-opacity",function(t){return Kt})}function S(t){if(t){var n=et.selectAll("rect.high, rect.singleValue").data(z);n.call(D),n.enter().append("rect").call(D),n.exit().remove();var a=et.selectAll("rect.low").data(z);a.call(w),a.enter().append("rect").call(w),a.exit().remove()}else{var e=et.selectAll(".histogramTopStem").data(z);e.call(P),e.enter().append("line").call(P),e.exit().remove();var r=et.selectAll(".histogramBottomStem").data(z);r.call(k),r.enter().append("line").call(k),r.exit().remove();var i=et.selectAll(".histogramTopCross").data(z);i.call(T),i.enter().append("line").call(T),i.exit().remove();var o=et.selectAll(".histogramBottomCross").data(z);o.call(b),o.enter().append("line").call(b),o.exit().remove()}}function E(n){var a=d3.scale.category10(),e=0;n?(et.selectAll("path[id^='multiLine']")[0].forEach(function(a){var e=!1;n.forEach(function(n){n.keyHash=n.keyHash||"multiLine"+t.hashString(n.key),a.getAttribute("id")===n.keyHash&&(e=!0)}),e||a.remove()}),n.forEach(function(n){if(n&&n.values){n.keyHash=n.keyHash||"multiLine"+t.hashString(n.key);var r=et.selectAll("path#"+n.keyHash).data([n.values]);r.attr("id",n.keyHash).attr("class","multiLine").attr("fill","none").attr("stroke",function(){return n.color||a(e++)}).transition().attr("d",R("linear")),r.enter().append("path").attr("id",n.keyHash).attr("class","multiLine").attr("fill","none").attr("stroke",function(){return n.color?n.color:a(e++)}).transition().attr("d",R("linear")),r.exit().remove()}})):s.warn("No multi-data set for multiline chart")}function H(){if(J){var t=et.selectAll("g.grid.y_grid");t[0].length||(t=et.append("g").classed("grid y_grid",!0)),t.call(d3.svg.axis().scale(J).orient("left").ticks(10).tickSize(-Bt,0).tickFormat(""))}}function M(){function t(t){t.transition().delay(250).duration(750).attr("opacity",1)}if(K){et.selectAll("g.axis").remove();var n=(et.append("g").attr("class","x axis").attr("transform","translate(0,"+Gt+")").attr("opacity",.3).call(q).call(t),et.append("g").attr("class","y axis").attr("opacity",.3).call(K).call(t),et.selectAll(".yAxisUnitsLabel"));n.empty()&&(n=et.append("text").attr("class","yAxisUnitsLabel").attr("transform","rotate(-90),translate(-10,-50)").attr("x",-lt/2).style("text-anchor","start").text("NONE"===l.yAxisUnits?"":l.yAxisUnits).attr("opacity",.3).call(t))}}function L(n){var a=n||"monotone",e=d3.svg.line().interpolate(a).defined(function(n){return!t.isEmptyDataPoint(n)}).x(function(t){return j(t.timestamp)}).y(function(n){return J(t.isRawMetric(n)?n.value:n.avg)});return e}function R(n){var a=n||"monotone",e=d3.svg.line().interpolate(a).defined(function(n){return!t.isEmptyDataPoint(n)}).x(function(t){return j(t.timestamp)}).y(function(n){return J(t.isRawMetric(n)?n.value:n.avg)});return e}function N(){if("bar"===Tt||"scatterline"===Tt){var t=et.selectAll(".barAvgLine").data([z]);t.attr("class","barAvgLine").attr("d",L("monotone")),t.enter().append("path").attr("class","barAvgLine").attr("d",L("monotone")),t.exit().remove()}}function _(){function n(){et.classed("selecting",!0)}function a(){var n=Q.extent(),a=Math.round(n[0].getTime()),e=Math.round(n[1].getTime()),i=e-a;et.classed("selecting",!d3.event.target.empty()),i>=6e4&&(Y=[],B(Y),r.$broadcast(t.EventNames.CHART_TIMERANGE_CHANGED.toString(),n)),tt.call(Q.clear())}tt=et.selectAll("g.brush"),tt.empty()&&(tt=et.append("g").attr("class","brush")),Q=d3.svg.brush().x(j).on("brushstart",n).on("brushend",a),tt.call(Q),tt.selectAll(".resize").append("path"),tt.selectAll("rect").attr("height",Gt)}function V(t){t&&et.append("path").datum(t).attr("class","prevRangeAvgLine").style("stroke-dasharray","9,3").attr("d",L("linear"))}function I(t){t&&et.selectAll(".annotationDot").data(t).enter().append("circle").attr("class","annotationDot").attr("r",5).attr("cx",function(t){return j(t.timestamp)}).attr("cy",function(){return Gt-J(it)}).style("fill",function(t){return"1"===t.severity?"red":"2"===t.severity?"yellow":"white"})}function $(t){var n=t||"monotone",a=d3.svg.line().interpolate(n).x(function(t){return j(t.timestamp)}).y(function(t){return J(t.value)});return a}function B(t){var n=et.selectAll(".forecastLine").data([t]);n.attr("class","forecastLine").attr("d",$("monotone")),n.enter().append("path").attr("class","forecastLine").attr("d",$("monotone")),n.exit().remove()}function F(){Dt=Date.now(),wt=moment().subtract(xt,"seconds").valueOf(),x(pt,ht,wt,Dt,60)}function G(n){switch(n){case"rhqbar":C(!0);break;case"histogram":C(!1);break;case"line":t.createLineChart(et,j,J,z,Gt,Ct);break;case"hawkularmetric":s.info("DEPRECATION WARNING: The chart type hawkularmetric has been deprecated and will be removed in a future release. Please use the line chart type in its place"),t.createLineChart(et,j,J,z,Gt,Ct);break;case"multiline":E(U);break;case"area":t.createAreaChart(et,j,J,z,Gt,Ct,Vt);break;case"scatter":t.createScatterChart(et,j,J,z,Gt,Ct,Vt);break;case"scatterline":t.createScatterLineChart(et,j,J,z,Gt,Ct,Vt);break;default:s.warn("chart-type is not valid. Must be in [rhqbar,line,area,multiline,scatter,scatterline,histogram] chart type: "+n)}}var U,Y,z,X,O,W,J,j,K,q,Z,Q,tt,nt,at,et,rt,it,ot,st,ct,ut,lt=250,mt=750,dt="MM/DD/YYYY h:mm a",ft=[],pt=l.metricUrl,ht=l.metricId||"",vt=l.metricTenantId||"",gt=l.metricType||"gauge",xt=+l.timeRangeInSeconds||43200,yt=+l.refreshIntervalInSeconds||3600,At=+l.alertValue,Ct=l.interpolation||"monotone",Dt=Date.now(),wt=Dt-xt,Pt=[],kt=[],Tt=l.chartType||"line",bt=l.singleValueLabel||"Raw Value",St=l.noDataLabel||"No Data",Et=l.durationLabel||"Interval",Ht=l.minLabel||"Min",Mt=l.maxLabel||"Max",Lt=l.avgLabel||"Avg",Rt=l.timestampLabel||"Timestamp",Nt=!0,_t=!1,Vt=!1,It=!1,$t={top:10,right:5,bottom:5,left:90},Bt=mt-$t.left-$t.right,Ft=lt-50,Gt=Ft-$t.top-$t.bottom,Ut=600,Yt=30,zt=10,Xt=Gt+$t.top-Yt-zt+$t.bottom,Ot=+Yt+zt+$t.top,Wt=2,Jt=!1;ft=l.data,Y=l.forecastData,_t=l.showDataPoints,Pt=l.previousRangeData,kt=l.annotationData;var jt,Kt=.6;c.$watchCollection("data",function(t){t&&(ct=angular.fromJson(t),c.render(ct,ut))}),c.$watch("multiData",function(t){t&&(U=angular.fromJson(t),c.render(ct,ut))},!0),c.$watch("previousRangeData",function(t){t&&(ut=angular.fromJson(t),c.render(ct,ut))},!0),c.$watch("annotationData",function(t){t&&(kt=angular.fromJson(t),c.render(ct,ut))},!0),c.$watch("forecastData",function(t){t&&(Y=angular.fromJson(t),c.render(ct,ut))},!0),c.$watchGroup(["alertValue","chartType","hideHighLowValues","useZeroMinValue","showAvgLine"],function(t){At=t[0]||At,Tt=t[1]||Tt,Vt="undefined"!=typeof t[2]?t[2]:Vt,It="undefined"!=typeof t[3]?t[3]:It,Nt="undefined"!=typeof t[4]?t[4]:Nt,c.render(ct,ut)}),c.$watchGroup(["metricUrl","metricId","metricType","metricTenantId","timeRangeInSeconds"],function(t){pt=t[0]||pt,ht=t[1]||ht,gt=t[2]||ht,vt=t[3]||vt,xt=t[4]||xt,F()}),c.$watch("refreshIntervalInSeconds",function(t){t&&(yt=+t,o.cancel(jt),jt=o(function(){F()},1e3*yt))}),c.$on("$destroy",function(){o.cancel(jt)}),c.$on("DateRangeDragChanged",function(t,n){c.$emit("GraphTimeRangeChangedEvent",n)}),c.render=function(a,e){if(a||U){if(n&&console.group("Render Chart"),n&&console.time("chartRender"),Jt||f(),a&&h(a),U&&g(U),At&&At>rt&&it>At){var r=t.extractAlertRanges(z,At);t.createAlertBoundsArea(et,j,J,it,r)}_(),H(),G(Tt),_t&&t.createDataPoints(et,j,J,Z,z),V(e),M(),Nt&&N(),At&&At>rt&&it>At&&t.createAlertLine(et,j,J,z,At,"alertLine"),kt&&I(kt),Y&&Y.length>0&&B(Y),n&&console.timeEnd("chartRender"),n&&console.groupEnd("Render Chart")}}}return{link:c,restrict:"E",replace:!0,scope:{data:"=",multiData:"=",forecastData:"=",metricUrl:"@",metricId:"@",metricType:"@",metricTenantId:"@",startTimestamp:"@",endTimestamp:"@",timeRangeInSeconds:"@",refreshIntervalInSeconds:"@",previousRangeData:"@",annotationData:"@",showDataPoints:"=",alertValue:"@",interpolation:"@",chartType:"@",yAxisUnits:"@",useZeroMinValue:"=",chartHoverDateFormat:"@",chartHoverTimeFormat:"@",singleValueLabel:"@",noDataLabel:"@",durationLabel:"@",minLabel:"@",maxLabel:"@",avgLabel:"@",timestampLabel:"@",showAvgLine:"=",hideHighLowValues:"="}}}])}(Charts||(Charts={}));var Charts;!function(t){"use strict";var n=15,a=angular.module("hawkular.charts"),e=function(){function a(e){var r=this;this.restrict="E",this.replace=!0,this.scope={data:"=",showYAxisValues:"=",showXAxisValues:"=",alertValue:"@"},this.link=function(e,i,o){function s(){x&&y.selectAll("*").remove(),y=d3.select(i[0]),x=y.append("svg").attr("width",P+D.left+D.right).attr("height",T).attr("viewBox","0 0 "+(P+D.left+D.right)+" "+(k+D.top+D.bottom+n)).attr("preserveAspectRatio","xMinYMin meet"),A=x.append("g").attr("transform","translate("+D.left+","+D.top+")").attr("class","sparkline")}function c(e){h=d3.time.scale().range([0,P-10]).nice().domain([e[0].timestamp,e[e.length-1].timestamp]);var r=l?2:0;v=d3.svg.axis().scale(h).ticks(r).tickSize(4,0).tickFormat(t.xAxisTimeFormats()).orient("bottom"),A.selectAll("g.axis").remove();var i=d3.min(e,function(t){return t.avg}),o=d3.max(e,function(t){return t.avg});o+=.03*o,i-=.05*i,d=d3.scale.linear().rangeRound([a._CHART_HEIGHT-n,0]).domain([i,o]);var s=m?2:0;f=d3.svg.axis().scale(d).ticks(s).tickSize(3,0).orient("left");var c="basis",u=d3.svg.area().interpolate(c).defined(function(t){return!t.empty}).x(function(t){return h(t.timestamp)}).y0(function(t){return a._CHART_HEIGHT-n}).y1(function(t){return d(t.avg)}),x=d3.svg.line().interpolate(c).defined(function(t){return!t.empty}).x(function(t){return h(t.timestamp)}).y(function(t){return d(t.avg)-2}),y=A.selectAll("path.sparklineLine").data([e]);y.attr("class","sparklineLine").transition().attr("d",x),y.enter().append("path").attr("class","sparklineLine").transition().attr("d",x),y.exit().remove();var D=A.append("g").attr("class","sparkline");D.append("path").datum(e).transition().duration(500).attr("class","sparklineArea").attr("d",u),p=A.append("g").attr("class","y axis").call(f),g=A.append("g").attr("class","x axis").attr("transform","translate(0,"+k+")").call(v),C&&C>=i&&o>=C&&t.createAlertLine(A,h,d,e,C,"sparklineAlertLine")}function u(t){return t?t.map(function(t){var n=t.timestamp||t.start+(t.end-t.start)/2;return{timestamp:n,value:angular.isNumber(t.value)?t.value:void 0,avg:t.empty?void 0:t.avg,min:angular.isNumber(t.min)?t.min:void 0,max:angular.isNumber(t.max)?t.max:void 0,empty:t.empty}}):void 0}var l,m,d,f,p,h,v,g,x,y,A,C,D={top:10,right:5,bottom:5,left:45},w=a._CHART_HEIGHT,P=a._CHART_WIDTH-D.left-D.right,k=w-D.top-D.bottom,T=k+D.top;"undefined"!=typeof o.alertValue&&(C=+o.alertValue),"undefined"!=typeof o.showXAxisValues&&(l="true"===o.showXAxisValues),"undefined"!=typeof o.showYAxisValues&&(m="true"===o.showYAxisValues),e.$watchCollection("data",function(t){console.log("Sparkline Chart Data Changed"),t&&(r.dataPoints=u(angular.fromJson(t)),e.render(r.dataPoints))}),e.$watchCollection("alertValue",function(t){console.log("Sparkline AlertValue Changed"),t&&(C=t,r.dataPoints&&e.render(r.dataPoints))}),e.render=function(t){t&&t.length>0&&(console.group("Render Sparkline Chart"),
console.time("SparklineChartRender"),s(),c(t),console.timeEnd("SparklineChartRender"),console.groupEnd())}}}return a.Factory=function(){var t=function(t){return new a(t)};return t.$inject=["$rootScope"],t},a._CHART_WIDTH=300,a._CHART_HEIGHT=80,a}();t.SparklineChartDirective=e,a.directive("hawkularSparklineChart",e.Factory())}(Charts||(Charts={}));var Charts;!function(t){"use strict"}(Charts||(Charts={}));var Charts;!function(t){"use strict";function n(t){return t.empty}function a(t){return"undefined"==typeof t.avg}function e(){return d3.time.format.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%H:%M",function(t){return t.getMinutes()}],["%H:%M",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",function(){return!0}]])}function r(t){var n=t.append("defs");n.append("pattern").attr("id","noDataStripes").attr("patternUnits","userSpaceOnUse").attr("x","0").attr("y","0").attr("width","6").attr("height","3").append("path").attr("d","M 0 0 6 0").attr("style","stroke:#CCCCCC; fill:none;"),n.append("pattern").attr("id","unknownStripes").attr("patternUnits","userSpaceOnUse").attr("x","0").attr("y","0").attr("width","6").attr("height","3").attr("style","stroke:#2E9EC2; fill:none;").append("path").attr("d","M 0 0 6 0"),n.append("pattern").attr("id","downStripes").attr("patternUnits","userSpaceOnUse").attr("x","0").attr("y","0").attr("width","6").attr("height","3").attr("style","stroke:#ff8a9a; fill:none;").append("path").attr("d","M 0 0 6 0")}function i(t,n){return n(t.timestamp)}function o(t){var n,a,e,r=0;if(0==t.length)return r;for(n=0,e=t.length;e>n;n++)a=t.charCodeAt(n),r=(r<<5)-r+a,r|=0;return r}t.isEmptyDataPoint=n,t.isRawMetric=a,t.xAxisTimeFormats=e,t.createSvgDefs=r,t.xMidPointStartPosition=i,t.hashString=o}(Charts||(Charts={}));var Charts;!function(t){"use strict";function n(n,a,e,r,i,o,s){console.log("Creating Area Chart");var c=d3.svg.area().interpolate(o).defined(function(n){return!t.isEmptyDataPoint(n)}).x(function(t){return a(t)}).y(function(n){return e(t.isRawMetric(n)?n.value:n.max)}).y0(function(n){return e(t.isRawMetric(n)?n.value:n.avg)}),u=d3.svg.area().interpolate(o).defined(function(n){return!t.isEmptyDataPoint(n)}).x(function(t){return a(t)}).y(function(n){return e(t.isRawMetric(n)?n.value:n.avg)}).y0(function(t){return s?i:e(t.min)}),l=d3.svg.area().interpolate(o).defined(function(n){return!t.isEmptyDataPoint(n)}).x(function(t){return a(t)}).y(function(n){return e(t.isRawMetric(n)?n.value:n.min)}).y0(function(){return i});if(!s){var m=n.selectAll("path.highArea").data(r);m.attr("class","highArea").attr("d",c),m.enter().append("path").attr("class","highArea").attr("d",c),m.exit().remove();var d=n.selectAll("path.lowArea").data(r);d.attr("class","lowArea").attr("d",l),d.enter().append("path").attr("class","lowArea").attr("d",l),d.exit().remove()}var f=n.selectAll("path.avgArea").data(r);f.attr("class","avgArea").transition().attr("d",u),f.enter().append("path").attr("class","avgArea").transition().attr("d",u),f.exit().remove()}t.createAreaChart=n}(Charts||(Charts={}));var Charts;!function(t){"use strict";function n(n,a,e,r,i,o){var s=d3.svg.line().interpolate(o).defined(function(n){return!t.isEmptyDataPoint(n)}).x(function(t){return a(t.timestamp)}).y(function(n){return e(t.isRawMetric(n)?n.value:n.avg)}),c=n.selectAll("path.metricLine").data([r]);c.attr("class","metricLine").transition().attr("d",s),c.enter().append("path").attr("class","metricLine").transition().attr("d",s),c.exit().remove()}t.createLineChart=n}(Charts||(Charts={}));var Charts;!function(t){"use strict";function n(n,a,e,r,i,o,s){if(s)n.selectAll(".highDot, .lowDot").remove();else{var c=n.selectAll(".highDot").data(r);c.attr("class","highDot").filter(function(n){return!t.isEmptyDataPoint(n)}).attr("r",3).attr("cx",function(n){return t.xMidPointStartPosition(n,a)}).attr("cy",function(n){return e(t.isRawMetric(n)?n.value:n.max)}).style("fill",function(){return"#ff1a13"}).on("mouseover",function(t,n){}).on("mouseout",function(){}),c.enter().append("circle").filter(function(n){return!t.isEmptyDataPoint(n)}).attr("class","highDot").attr("r",3).attr("cx",function(n){return t.xMidPointStartPosition(n,a)}).attr("cy",function(n){return e(t.isRawMetric(n)?n.value:n.max)}).style("fill",function(){return"#ff1a13"}).on("mouseover",function(t,n){}).on("mouseout",function(){}),c.exit().remove();var u=n.selectAll(".lowDot").data(r);u.attr("class","lowDot").filter(function(n){return!t.isEmptyDataPoint(n)}).attr("r",3).attr("cx",function(n){return t.xMidPointStartPosition(n,a)}).attr("cy",function(n){return e(t.isRawMetric(n)?n.value:n.min)}).style("fill",function(){return"#70c4e2"}).on("mouseover",function(t,n){}).on("mouseout",function(){}),u.enter().append("circle").filter(function(n){return!t.isEmptyDataPoint(n)}).attr("class","lowDot").attr("r",3).attr("cx",function(n){return t.xMidPointStartPosition(n,a)}).attr("cy",function(n){return e(t.isRawMetric(n)?n.value:n.min)}).style("fill",function(){return"#70c4e2"}).on("mouseover",function(t,n){}).on("mouseout",function(){}),u.exit().remove()}var l=n.selectAll(".avgDot").data(r);l.attr("class","avgDot").filter(function(n){return!t.isEmptyDataPoint(n)}).attr("r",3).attr("cx",function(n){return t.xMidPointStartPosition(n,a)}).attr("cy",function(n){return e(t.isRawMetric(n)?n.value:n.avg)}).style("fill",function(){return"#FFF"}).on("mouseover",function(t,n){}).on("mouseout",function(){}),l.enter().append("circle").filter(function(n){return!t.isEmptyDataPoint(n)}).attr("class","avgDot").attr("r",3).attr("cx",function(n){return t.xMidPointStartPosition(n,a)}).attr("cy",function(n){return e(t.isRawMetric(n)?n.value:n.avg)}).style("fill",function(){return"#FFF"}).on("mouseover",function(t,n){}).on("mouseout",function(){}),l.exit().remove()}t.createScatterChart=n}(Charts||(Charts={}));var Charts;!function(t){"use strict";function n(n,a,e,r,i,o,s){var c=n.selectAll(".scatterLineTopStem").data(r);c.attr("class","scatterLineTopStem").filter(function(n){return!t.isEmptyDataPoint(n)}).attr("x1",function(n){return t.xMidPointStartPosition(n,a)}).attr("x2",function(n){return t.xMidPointStartPosition(n,a)}).attr("y1",function(t){return e(t.max)}).attr("y2",function(t){return e(t.avg)}).attr("stroke",function(t){return"#000"}),c.enter().append("line").filter(function(n){return!t.isEmptyDataPoint(n)}).attr("class","scatterLineTopStem").attr("x1",function(n){return t.xMidPointStartPosition(n,a)}).attr("x2",function(n){return t.xMidPointStartPosition(n,a)}).attr("y1",function(t){return e(t.max)}).attr("y2",function(t){return e(t.avg)}).attr("stroke",function(t){return"#000"}),c.exit().remove();var u=n.selectAll(".scatterLineBottomStem").data(r);u.attr("class","scatterLineBottomStem").filter(function(n){return!t.isEmptyDataPoint(n)}).attr("x1",function(n){return t.xMidPointStartPosition(n,a)}).attr("x2",function(n){return t.xMidPointStartPosition(n,a)}).attr("y1",function(t){return e(t.avg)}).attr("y2",function(t){return e(t.min)}).attr("stroke",function(t){return"#000"}),u.enter().append("line").filter(function(n){return!t.isEmptyDataPoint(n)}).attr("class","scatterLineBottomStem").attr("x1",function(n){return t.xMidPointStartPosition(n,a)}).attr("x2",function(n){return t.xMidPointStartPosition(n,a)}).attr("y1",function(t){return e(t.avg)}).attr("y2",function(t){return e(t.min)}).attr("stroke",function(t){return"#000"}),u.exit().remove();var l=n.selectAll(".scatterLineTopCross").data(r);l.attr("class","scatterLineTopCross").filter(function(n){return!t.isEmptyDataPoint(n)}).attr("x1",function(n){return t.xMidPointStartPosition(n,a)-3}).attr("x2",function(n){return t.xMidPointStartPosition(n,a)+3}).attr("y1",function(t){return e(t.max)}).attr("y2",function(t){return e(t.max)}).attr("stroke",function(t){return"#000"}).attr("stroke-width",function(t){return"0.5"}),l.enter().append("line").filter(function(n){return!t.isEmptyDataPoint(n)}).attr("class","scatterLineTopCross").attr("x1",function(n){return t.xMidPointStartPosition(n,a)-3}).attr("x2",function(n){return t.xMidPointStartPosition(n,a)+3}).attr("y1",function(t){return e(t.max)}).attr("y2",function(t){return e(t.max)}).attr("stroke",function(t){return"#000"}).attr("stroke-width",function(t){return"0.5"}),l.exit().remove();var m=n.selectAll(".scatterLineBottomCross").data(r);m.attr("class","scatterLineBottomCross").filter(function(n){return!t.isEmptyDataPoint(n)}).attr("x1",function(n){return t.xMidPointStartPosition(n,a)-3}).attr("x2",function(n){return t.xMidPointStartPosition(n,a)+3}).attr("y1",function(t){return e(t.min)}).attr("y2",function(t){return e(t.min)}).attr("stroke",function(t){return"#000"}).attr("stroke-width",function(t){return"0.5"}),m.enter().append("line").filter(function(n){return!t.isEmptyDataPoint(n)}).attr("class","scatterLineBottomCross").attr("x1",function(n){return t.xMidPointStartPosition(n,a)-3}).attr("x2",function(n){return t.xMidPointStartPosition(n,a)+3}).attr("y1",function(t){return e(t.min)}).attr("y2",function(t){return e(t.min)}).attr("stroke",function(t){return"#000"}).attr("stroke-width",function(t){return"0.5"}),m.exit().remove();var d=n.selectAll(".scatterDot").data(r);d.attr("class","scatterDot").filter(function(n){return!t.isEmptyDataPoint(n)}).attr("r",3).attr("cx",function(n){return t.xMidPointStartPosition(n,a)}).attr("cy",function(n){return e(t.isRawMetric(n)?n.value:n.avg)}).style("fill",function(){return"#70c4e2"}).style("opacity",function(){return"1"}).on("mouseover",function(t,n){}).on("mouseout",function(){}),d.enter().append("circle").filter(function(n){return!t.isEmptyDataPoint(n)}).attr("class","scatterDot").attr("r",3).attr("cx",function(n){return t.xMidPointStartPosition(n,a)}).attr("cy",function(n){return e(t.isRawMetric(n)?n.value:n.avg)}).style("fill",function(){return"#70c4e2"}).style("opacity",function(){return"1"}).on("mouseover",function(t,n){}).on("mouseout",function(){}),d.exit().remove()}t.createScatterLineChart=n}(Charts||(Charts={}));